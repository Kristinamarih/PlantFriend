<div class="col-12 text-center">
    <div class="row">
        <ul class="list-group">
            <h1>Messages</h1>

            <% @conversations.each do |conversation| %>
                <li class="list-group-item">
                    <p><%= conversation.receiver(current_user).username %></p>
                    <br>
                    <%= link_to 'View conversation', conversation_messages_path(conversation) %>
                </li>
            <% end %>

            <% @users.each do |user| %>
                <li class="list-group-item">
                    <%= link_to user.username, conversations_path(sender_id: current_user.id, recipient_id: user.id), method: :post %>
                    <%= render partial: "message_form", locals: {conversation: @conversation, message: @message} %>
                </li>
            <% end %>
        </ul>
    </div>
</div>